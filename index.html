<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>ğŸ„ è–èª•ç¨®è˜¿è”” ğŸ¥•</title>
<style>
body{margin:0;font-family:"Nunito",sans-serif;background:linear-gradient(#b4e4ff,#ffffff);text-align:center;overflow:hidden;}
.snowflake{position:fixed;top:-10px;color:white;font-size:1em;animation:fall linear infinite;z-index:5;}
@keyframes fall{to{transform:translateY(110vh);}}

/* éŸ³æ¨‚æ£ */
#music-control{
 position:fixed;top:15px;right:15px;width:48px;height:48px;border-radius:50%;
 background:rgba(255,255,255,0.8);display:flex;justify-content:center;align-items:center;
 font-size:26px;cursor:pointer;box-shadow:0 0 8px rgba(0,0,0,0.3);z-index:100;
}
#music-control:hover{transform:scale(1.1);}

/* ç™»å…¥é  */
#lockscreen{position:relative;z-index:10;margin:auto;margin-top:90px;
 background:rgba(255,255,255,0.93);border-radius:15px;box-shadow:0 0 10px rgba(0,0,0,.1);
 padding:25px;width:90%;max-width:400px;text-align:center;}
input[type=password]{padding:10px;width:80%;border-radius:8px;border:1.8px solid #88c;}
button{
 padding:9px 14px;margin:5px;border:none;border-radius:8px;background:#ff9999;
 color:white;font-size:15px;cursor:pointer;transition:opacity .2s;
}
button:hover{background:#ff7777;}
button:disabled{opacity:0.5;cursor:not-allowed;}
#msg{color:red;height:1.2em;margin-top:6px;}

/* éŠæˆ²ç•«é¢ */
#game{display:none;}
.container{max-width:500px;margin:0 auto;background:rgba(255,255,255,0.9);
 border-radius:15px;box-shadow:0 0 10px rgba(0,0,0,0.1);padding:15px;margin-top:20px;}
.value{font-size:18px;margin:4px 0;}
.progress-container{background:#eee;border-radius:10px;margin:8px auto;width:80%;height:16px;}
.progress-bar{background:linear-gradient(45deg,#ffcc00,#ffaa00);height:100%;width:0%;}
#field{position:relative;width:100%;height:240px;
 background:linear-gradient(#4ae,#3b9);border-radius:10px;overflow:hidden;margin-top:10px;}
.ground{position:absolute;bottom:0;width:100%;height:60%;
 background:repeating-linear-gradient(45deg,#784,#693 12px);}
.plant{position:absolute;transition:all .5s ease;font-size:2em;opacity:0;transform:translateY(10px);}
.plant.show{opacity:1;transform:translateY(0);}
.icon{position:absolute;font-size:2em;opacity:0;}
#rabbit,#cat{bottom:40px;}
#rabbit.run{animation:rabbit 4s linear;}
#cat.run{animation:cat 4s linear;}
@keyframes rabbit{0%{left:-50px;opacity:1;}100%{left:110%;opacity:0;}}
@keyframes cat{0%{left:110%;opacity:1;}100%{left:-50px;opacity:0;}}
#message{min-height:22px;margin-top:6px;}
#timer{margin-top:6px;font-weight:bold;color:#333;}
</style>
</head>
<body>

<!-- é£„é›ª -->
<script>
for(let i=0;i<40;i++){
 const s=document.createElement("div");
 s.className="snowflake";s.textContent="â„";
 s.style.left=Math.random()*100+"%";
 s.style.fontSize=(10+Math.random()*10)+"px";
 s.style.animationDuration=(5+Math.random()*5)+"s";
 document.body.appendChild(s);
}
</script>

<!-- éŸ³æ¨‚ -->
<div id="music-control">ğŸ”Š</div>
<audio id="bgm" loop preload="auto">
 <source src="bgm.mp3" type="audio/mpeg">
</audio>

<!-- ç™»å…¥é  -->
<div id="lockscreen">
 <h2>ğŸ„ è–èª•ç¨®è˜¿è”” ğŸ¥•</h2>
 <p id="welcomeText">è«‹è¼¸å…¥æ´»å‹•å¯†ç¢¼ ğŸ…</p>
 <input type="password" id="pwd" placeholder="è¼¸å…¥å¯†ç¢¼"><br>
 <button id="loginBtn">ç™»å…¥</button>
 <p id="msg"></p>
</div>

<!-- éŠæˆ²ç•«é¢ -->
<div id="game">
<div class="container">
  <h3>ğŸ‘¨â€ğŸŒ¾ è–èª•ç¨®è˜¿è””ï¼ˆå¤šè˜¿è””ç”°ï¼‰ğŸ¥•</h3>
  <div class="value" id="wild">é‡ç”Ÿè˜¿è””ğŸ¥•ï¼š0</div>
  <div class="value" id="safe">å®‰å…¨è˜¿è””ğŸŒŸï¼š0</div>
  <div class="value" id="total">ç¸½æ”¶æˆï¼š0 æ ¹</div>
  <div class="value" id="rate">VIP å®‰å…¨ç‡ï¼š0%</div>
  <div class="progress-container"><div class="progress-bar" id="bar"></div></div>

  <div id="field">
    <div class="ground"></div>
    <div class="icon" id="rabbit">ğŸ‡</div>
    <div class="icon" id="cat">ğŸ±</div>
  </div>

  <button id="plantBtn">ç¨®è˜¿è”” ğŸŒ° (20/20)</button>
  <button id="waterBtn">æ·‹æ°´ ğŸ’§ (1/1)</button>
  <button id="bankBtn">å­˜å…¥è¾²å ´éŠ€è¡Œ ğŸ’³</button>
  <button id="resetBtn" style="background:#77bb77;">ğŸ”„ é‡æ–°é–‹å§‹</button>

  <div id="message"></div>
  <div id="timer"></div>
</div>
</div>

<script defer>
document.addEventListener("DOMContentLoaded",()=>{
// === éŸ³æ¨‚æ§åˆ¶ ===
const bgm=document.getElementById('bgm');
let playing=false;
document.getElementById('music-control').addEventListener("click",(e)=>{
 if(!playing){bgm.play();playing=true;e.target.textContent='ğŸ”ˆ';}
 else{bgm.pause();playing=false;e.target.textContent='ğŸ”‡';}
});

// === ç™»å…¥ ===
const PASSWORD="600";
document.getElementById("loginBtn").addEventListener("click",login);
function login(){
 const v=document.getElementById("pwd").value.trim();
 if(v===PASSWORD){
   document.getElementById("lockscreen").style.display="none";
   document.getElementById("game").style.display="block";
   triggerLoginEvent();
 }else document.getElementById("msg").textContent="âŒ å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹å†è©¦ ğŸ";
}
function triggerLoginEvent(){
 const ev=[
   "ğŸ æ­¡è¿åšŸåˆ°è–èª•è¾²å ´ï½å¿«å•²ç¨®ç¬¬ä¸€æ¢è˜¿è””å•¦ï¼",
   "â˜€ï¸ ä»Šæ—¥æ°£æº«å•±å•±å¥½ï½",
   "â„ï¸ é£„é›ªä»¤è˜¿è””æ›´åŠ ç”œç¾ï½",
   "ğŸ± è²“è²“å–µå–µå¹«ä½ ç‡ä½ç”°ï¼",
   "ğŸ‡ å°å…”å¹«æ‰‹é¬†æ³¥ï½"
 ];
 msg.textContent=ev[Math.floor(Math.random()*ev.length)];
 setTimeout(()=>msg.textContent="",4000);
}

// === éŠæˆ²æ•¸æ“š ===
let seeds=[],grown=0,safeCarrot=0;
const LIMIT_PER_DAY=20;
let plantLimit=LIMIT_PER_DAY;
let waterLimit=1;

const field=document.getElementById("field");
const msg=document.getElementById("message");
const bar=document.getElementById("bar");
const wildEl=document.getElementById("wild");
const safeEl=document.getElementById("safe");
const totalEl=document.getElementById("total");
const rateEl=document.getElementById("rate");
const timerText=document.getElementById("timer");
const plantBtn=document.getElementById("plantBtn");
const waterBtn=document.getElementById("waterBtn");
const resetBtn=document.getElementById("resetBtn");

// ğŸ•› æ¯å¤©é‡ç½®
function checkDailyReset(){
 const today=new Date().toDateString();
 const last=localStorage.getItem("lastReset");
 if(last!==today){
   plantLimit=LIMIT_PER_DAY;
   waterLimit=1;
   localStorage.setItem("plantLimit",plantLimit);
   localStorage.setItem("waterLimit",waterLimit);
   localStorage.setItem("lastReset",today);
 }
 const s1=localStorage.getItem("plantLimit");
 const s2=localStorage.getItem("waterLimit");
 if(s1)plantLimit=parseInt(s1);
 if(s2)waterLimit=parseInt(s2);
}
checkDailyReset();

// ğŸŒ° ç¨®
plantBtn.addEventListener("click",()=>{
 if(plantLimit<=0){msg.textContent="ğŸ˜… ä»Šæ—¥ 20 æ¬¡æ©Ÿæœƒç”¨æ™’å•¦ï¼Œå‡Œæ™¨é‡ç½®ï½";return;}
 plantLimit--; localStorage.setItem("plantLimit",plantLimit);
 const p={start:Date.now(),status:'seed'};
 const el=document.createElement("div");
 el.className="plant show";el.textContent="ğŸŒ°";
 el.style.left=Math.random()*80+5+"%";
 el.style.bottom=Math.random()*10+25+"%";
 field.appendChild(el);
 p.el=el; seeds.push(p);
 msg.textContent="ğŸŒ° ç¨®ä¸‹ä¸€ç²’è˜¿è””ç¨®å­ï¼ï¼ˆ3å°æ™‚é•·å¤§)";
 updateUI();
});

// ğŸ’§ æ·‹æ°´ï¼ˆæ¯å¤©ä¸€æ¬¡ï¼‰
waterBtn.addEventListener("click",()=>{
 if(waterLimit<=0){msg.textContent="ğŸ’§ ä»Šæ—¥å·²ç¶“æ·‹éå•¦ï½";return;}
 waterLimit--; localStorage.setItem("waterLimit",waterLimit);
 const seedCount=seeds.filter(p=>p.status==='seed').length;
 const grownCount=seeds.filter(p=>p.status==='grown').length;
 let add=0;
 if(seedCount>0){
   for(let i=0;i<seedCount*2;i++){
     const p={start:Date.now(),status:'seed'};
     const el=document.createElement("div");
     el.className="plant show";el.textContent="ğŸŒ°";
     el.style.left=Math.random()*80+5+"%";
     el.style.bottom=Math.random()*10+25+"%";
     field.appendChild(el);
     p.el=el;seeds.push(p);
   }
   add+=seedCount*2;
 }
 if(grownCount>0){grown+=grownCount*2;add+=grownCount*2;}
 msg.textContent=`ğŸ’§ æ·‹æ°´æˆåŠŸï¼åŠ æˆ +${add} ğŸŒ±`;
 updateUI();
});

// ğŸ’³ å­˜å…¥éŠ€è¡Œ
document.getElementById("bankBtn").addEventListener("click",()=>{
 if(grown===0){msg.textContent="å†‡æˆç†Ÿè˜¿è””å¯ä»¥å­˜ï½";return;}
 safeCarrot+=grown;grown=0;
 msg.textContent="ğŸ’³ å…¨éƒ¨æˆç†Ÿè˜¿è””å·²å­˜å…¥è¾²å ´éŠ€è¡Œ ğŸŒŸ";
 updateUI();
});

// ğŸ”„ é‡æ–°é–‹å§‹ï¼ˆæ¸…é™¤æ‰€æœ‰æ•¸æ“šï¼‰
resetBtn.addEventListener("click",()=>{
 if(confirm("ç¢ºå®šè¦é‡æ–°é–‹å§‹å—ï¼Ÿæœƒæ¸…é™¤æ‰€æœ‰ç´€éŒ„å–”ï¼ğŸŒ±")){
   localStorage.clear();
   seeds=[];grown=0;safeCarrot=0;
   plantLimit=LIMIT_PER_DAY;
   waterLimit=1;
   field.querySelectorAll(".plant").forEach(p=>p.remove());
   msg.textContent="ğŸ”„ å·²é‡ç½®éŠæˆ²ï¼ä¸€åˆ‡é‡æ–°é–‹å§‹ï¼";
   updateUI();
 }
});

// ğŸ•’ æˆé•·æª¢æŸ¥
setInterval(()=>{
 const now=Date.now();
 seeds.forEach(p=>{
   const diff=(now-p.start)/1000;
   if(diff>=10800 && p.status==='seed'){p.status='grown';p.el.textContent="ğŸ¥•";grown++;}
 });
 updateUI();
},60000);

// æ›´æ–°ç•«é¢
function updateUI(){
 const wild=seeds.filter(p=>p.status==='seed').length;
 const total=wild+grown+safeCarrot;
 const rate=total?Math.round((safeCarrot/total)*100):0;
 wildEl.textContent="é‡ç”Ÿè˜¿è””ğŸ¥•ï¼š"+wild;
 safeEl.textContent="å®‰å…¨è˜¿è””ğŸŒŸï¼š"+safeCarrot;
 totalEl.textContent="ç¸½æ”¶æˆï¼š"+total+" æ ¹";
 rateEl.textContent="VIP å®‰å…¨ç‡ï¼š"+rate+"%";
 bar.style.width=Math.min(100,rate)+"%";
 plantBtn.textContent=`ç¨®è˜¿è”” ğŸŒ° (${plantLimit}/20)`;
 waterBtn.textContent=`æ·‹æ°´ ğŸ’§ (${waterLimit}/1)`;
 plantBtn.disabled=plantLimit<=0;
 waterBtn.disabled=waterLimit<=0;
 updateTimer();
}

// è¨ˆæ™‚é¡¯ç¤º
function updateTimer(){
 if(!seeds.length){timerText.textContent="";}
 else{
   const now=Date.now();let soonest=null;
   seeds.forEach(p=>{
     if(p.status==='seed'){
       const left=10800-(now-p.start)/1000;
       if(left>0&&(soonest===null||left<soonest))soonest=left;
     }
   });
   if(soonest)timerText.textContent="â³ ä¸‹ä¸€é¡†è˜¿è””å‰©é¤˜ "+Math.ceil(soonest/60)+" åˆ†é˜";
   else timerText.textContent="";
 }
}

// ğŸ‡ğŸ± å‹•ç‰©å‹•ç•«
setInterval(()=>{
 const r=Math.random();
 if(r<0.1){document.getElementById("rabbit").classList.add("run");
   setTimeout(()=>document.getElementById("rabbit").classList.remove("run"),4000);}
 else if(r<0.2){document.getElementById("cat").classList.add("run");
   setTimeout(()=>document.getElementById("cat").classList.remove("run"),4000);}
},60000);

updateUI();
});
</script>
</body>
</html>